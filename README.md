## 功能特点

- 支持指定时间区间搜索
- 支持多关键词批量爬取
- 支持断点续爬功能
- 支持评论数据获取
- 支持 MongoDB 或 CSV 存储方式
- 自动更新 Cookie 功能

## 快速开始

### 1、下载项目并安装依赖

```bash
# 克隆项目
git clone https://github.com/Euclid-Jie/Euclidweibo-search-v2.git

# 安装依赖
pip install -r requirements.txt
```

### 2、设置 Cookie

将 `Cookie` 写入 `Cookie.txt` 中。80% 的报错/运行异常由 Cookie 设置不正确引起，特录制获取 Cookie 的[视频教程](https://www.bilibili.com/video/BV1Sh4y1J7Yz)，欢迎观看。

### 3、运行爬虫

```python
# 设置参数
search_options = WeiboSearchOptions(
    cookie_path="cookie.txt",  # cookie文件路径
    limit=3,  # 最小时间跨度更新页面数阈值，建议3~5
    keyword_list=["北师大", "BNU"],  # 关键词列表
    start_time="2020-01-01-0",  # 开始时间
    end_time="2020-01-10-0",  # 结束时间
    keyword_contain=True,  # 是否要求微博内容严格包含关键词
    mongo_save=True,  # True: 存入MongoDB, False: 存入CSV
    ColName="test",  # CSV文件名（mongo_save=False时有效）
)

# 运行爬虫
WeiboClassRun(search_options)
```

## 数据字段说明

| 字段名            | 说明                   |
|-----------------|------------------------|
| keyWords        | 检索的关键词             |
| mid             | 微博标识ID              |
| time            | 微博发布时间             |
| nick_name       | 发布者昵称              |
| content         | 微博内容                |
| reposts         | 转发数                  |
| comments        | 评论数                  |
| attitudes       | 点赞数                  |

### 帖子内容字段说明
| 中文字段 | 英文字段 | 释义 |
|---------|---------|------|
| keyWords | Keywords | 关键词，用于描述微博内容的主题或标签，常用于搜索和分类。 |
| mid | Message ID | 微博帖子的唯一标识符（Message ID），用于定位具体的微博内容。 |
| mblogid | Microblog ID | 微博内容的唯一标识符，与 mid 类似，具体差异可能因数据来源而异。 |
| uid | User ID | 用户的唯一标识符，用于区分微博平台上的不同用户。 |
| nick_name | Nickname | 用户昵称，即用户在微博上显示的名字，可能更改但非唯一。 |
| time | Timestamp | 发布时间，记录微博内容的发布时间，通常以时间戳或日期格式表示。 |
| content | Content | 微博正文内容，即用户发布的文本信息，可能包含文字、链接或多媒体描述。 |
| 转发数 | Reposts Count | 转发数量，表示该微博被其他用户转发的次数。 |
| 评价数 | Comments Count | 评论数量，表示该微博收到的评论条数。 |
| 点赞数 | Attitudes Count | 点赞数量，表示该微博被其他用户点赞的次数。 |

### 用户信息字段说明

| 中文字段 | 英文字段 | 释义 |
|---------|---------|------|
| 用户主页的URL | Profile URL | 用户的微博主页链接，可通过此链接访问用户的个人主页。 |
| 唯一ID | User ID | 用户的唯一标识符，用于精确识别特定用户。 |
| 用户粉丝数 | Followers Count | 该用户的粉丝数量，反映用户的影响力。 |
| 用户性别 | Gender | 用户的性别信息（男/女/未知）。 |
| 用户个人主页显示的地址 | Location | 用户在个人资料中设置的地理位置信息。 |
| 用户的认证状态 | Verified Status | 表示用户是否通过微博官方认证（已认证/未认证）。 |
| 认证类型 | Verification Type | 用户认证的具体类型（如个人认证、机构认证等）。 |
| 用户地址 | User Location | 用户设置的所在城市。 |

### 评论数据字段说明
| 中文字段 | 英文字段 | 释义 |
|---------|---------|------|
| 帖子的URL | Post URL | 原微博帖子的链接地址，用于定位评论所属的具体微博。 |
| 微博唯一ID | Comment ID | 评论的唯一标识符，用于区分不同的评论。 |
| 带时区时间格式 | Timestamp | 评论发布的具体时间。 |
| 评论内容 | Comment Content | 用户发表的评论文本内容。 |
| 转发量 | Reposts Count | 该评论被转发的次数（评论一般为0）。 |
| 评论量 | Reply Count | 该评论收到的回复数量，即子评论数。 |
| 点赞量 | Like Count | 该评论获得的点赞数量。 |
| 地理定位解析结果 | Source Location | 发表评论时的地理位置信息或设备来源（去除"来自"前缀）。 |



### 微博认证类型完整对照表
| 认证代码 | 认证状态 | 认证类型 | 说明 |
|---------|---------|---------|------|
| -1 | 未认证 | 普通用户 | 未经过任何官方认证的普通账号 |
| 0 | 已认证 | 个人认证 | 名人、知名博主等个人用户 |
| 1 | 已认证 | 政府认证 | 政府机构、事业单位等官方机构 |
| 2 | 已认证 | 企业认证 | 企业、商家等组织机构 |
| 3 | 已认证 | 媒体认证 | 新闻媒体、出版机构等 |
| 4 | 已认证 | 校园认证 | 高校、教育机构等 |
| 5 | 已认证 | 网站认证 | 网站平台、网络社区等 |
| 6 | 已认证 | 应用认证 | APP、小程序等应用程序 |
| 7 | 已认证 | 机构认证 | 其他类型的组织机构 |
| 8 | 待审核 | 待审企业 | 正在审核中的企业账号 |
| 200 | 已认证 | 初级达人 | 微博达人体系的初级认证 |
| 220 | 已认证 | 中级达人 | 微博达人体系的中级认证 |
| 400 | 特殊认证 | 已故名人 | 已故知名人士的纪念账号 |


## 更新日志

### 2024-03-12
- 新增: 自动更新 cookie 功能
- 优化: 自动获取用户总微博数
- 优化: 断点续爬功能

### 2023-12-15
- 简化代码结构
- 统一参数配置方式
- 优化数据存储逻辑

## 注意事项

1. Cookie 需要定期更新，建议每次使用前更新
2. 微博限制每个时间段最多显示 30-50 页数据
3. 爬取速度过快可能导致账号被限制
4. 建议使用代理 IP 进行大规模爬取

## 开源许可

本项目采用 MIT 许可证。

## 贡献指南

欢迎提交 Pull Request 或 Issues！

## 联系方式

如有问题，请通过以下方式联系：
- GitHub Issues
- 邮件联系（请在 Issues 中留言获取邮箱）
